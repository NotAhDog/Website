<head>
    <title>Eds Art - Folios</title>
</head>
{% extends 'layout.html' %}
{% block content %}
<h1 class="title">Folios</h1>
<div class="folio-container" onmousedown="StartScroll()" onmouseup="StopScroll()" id="folio-container">
    {% for folio in folios %}
    <div class="folio-item">
        <p>{{ folio.name }}</p>
        <br>

        <!-- Adding the images/descriptions -->
    <div class="container">
        <img src="/static/images/{{ folio.photo }}" class="image">
        <div class="middle" onclick="ShowDescription('{{ folio.id }}')">
            <div class="text">Learn More</div>
        </div>
    </div>
        <p id="{{ folio.id }}" style="display: none;">{{ folio.description }}</p>
    </div>
    {% endfor %}
</div>
<script>

// Making the description show and hide on click of the folios

    function ShowDescription(id){
        var is_visible=false;
        if(document.getElementById(id).style.display=='block'){
            is_visible=true;
        }
        {% for folio in folios %}
        document.getElementById('{{ folio.id }}').style.display='none';
        {% endfor %}
        if(!is_visible){
            document.getElementById(id).style.display='block';
        }
    }

// Making the page scroll with the movement of the mouse 

    var mousedown=false;
    var initialxoffset=0;
    var initialtranslation=0;

    function StartScroll(){
        var e=window.event;
        console.log(e.pageX);
        initialxoffset=e.pageX;
        mousedown=true;
        handleMouseMove();
    }

    function MoveMouse(){
        console.log("Y")
        var e=window.event;
        var mousepos=e.pageX;
        var offset=initialxoffset-mousepos;
        if(mousedown){
            console.log(offset);
            requestAnimationFrame(MoveMouse);
            document.getElementById('folio-container').style.transform=`translateX(123px)`.replace('123', offset.toString());
        }
    }

    (function() {
    document.onmousemove = handleMouseMove;
    function handleMouseMove(event) {
        if(mousedown){
        var eventDoc, doc, body;
        var e=window.event;
        var mousepos=e.pageX;
        var offset=initialxoffset-mousepos;

        event = event || window.event; 

        if (event.pageX == null && event.clientX != null) {
            eventDoc = (event.target && event.target.ownerDocument) || document;
            doc = eventDoc.documentElement;
            body = eventDoc.body;

            event.pageX = event.clientX +
              (doc && doc.scrollLeft || body && body.scrollLeft || 0) -
              (doc && doc.clientLeft || body && body.clientLeft || 0);
        }
        document.getElementById('folio-container').style.transform=`translateX(123px)`.replace('123', offset.toString());
        }
    }
})();

    function StopScroll(){
        mousedown=false;
    }
</script>
{% endblock %}